(this["webpackJsonppart2-notes"]=this["webpackJsonppart2-notes"]||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(15),u=n.n(r),a=n(6),o=n(3),i=n(2),s=n(4),d=n.n(s),l="https://rocky-meadow-54548.herokuapp.com/api/persons",b=function(){return d.a.get(l).then((function(e){return e.data}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},m=function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){var t=e.name,n=e.number,r=e.handleDelete;return Object(c.jsxs)("div",{children:[t," ",n," ",Object(c.jsx)("button",{onClick:r,children:"delete"})]})},O=function(e){var t=e.persons,n=e.handleDelete;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)(h,{name:e.name,number:e.number,handleDelete:function(){return n(e.id)}},e.name)}))})},p=function(e){var t=e.filter,n=e.setFilter;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},v=function(e){var t=e.handleSubmit,n=e.name,r=e.number,u=e.setName,a=e.setNumber;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:function(e){return u(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:function(e){return a(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t=e.message;return null===t?null:Object(c.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:t})},g=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(i.useState)(""),s=Object(o.a)(u,2),d=s[0],l=s[1],h=Object(i.useState)(""),g=Object(o.a)(h,2),w=g[0],S=g[1],k=Object(i.useState)(""),y=Object(o.a)(k,2),C=y[0],D=y[1],N=Object(i.useState)(null),T=Object(o.a)(N,2),A=T[0],B=T[1];Object(i.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var E=""===C?n:n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(x,{message:A}),Object(c.jsx)(p,{filter:C,setFilter:D}),Object(c.jsx)("h3",{children:"Add a new"}),Object(c.jsx)(v,{handleSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===d}));console.log(t),t.length>0&&window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&m(t[0].id,Object(a.a)(Object(a.a)({},t[0]),{},{number:w})).then((function(e){r(n.map((function(n){return n.id===t[0].id?e:n}))),B("Updated contact '".concat(d,"'")),setTimeout((function(){B(null)}),5e3)})),""!==d&&0===t.length&&j({name:d,number:w}).then((function(e){r(n.concat(e)),B("Added contact '".concat(d,"'")),setTimeout((function(){B(null)}),5e3),l(""),S("")}))},name:d,number:w,setName:l,setNumber:S}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(O,{persons:E,handleDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&f(e).then((function(c){r(n.filter((function(t){return t.id!==e}))),B("Removed contact '".concat(t.name,"'")),setTimeout((function(){B(null)}),5e3)})).catch((function(c){r(n.filter((function(t){return t.id!==e}))),B("Contact '".concat(t.name,"' was already removed from server")),setTimeout((function(){B(null)}),5e3)}))}})]})};u.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d31d19bd.chunk.js.map