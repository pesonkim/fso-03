(this["webpackJsonppart2-notes"]=this["webpackJsonppart2-notes"]||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(15),u=n.n(r),o=n(6),a=n(3),i=n(2),s=n(4),l=n.n(s),d="https://rocky-meadow-54548.herokuapp.com/api/persons",b=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){var t=e.name,n=e.number,r=e.handleDelete;return Object(c.jsxs)("div",{children:[t," ",n," ",Object(c.jsx)("button",{onClick:r,children:"delete"})]})},O=function(e){var t=e.persons,n=e.handleDelete;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)(h,{name:e.name,number:e.number,handleDelete:function(){return n(e.id)}},e.name)}))})},p=function(e){var t=e.filter,n=e.setFilter;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},v=function(e){var t=e.handleSubmit,n=e.name,r=e.number,u=e.setName,o=e.setNumber;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:function(e){return u(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t=e.message;return null===t?null:Object(c.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:t})},g=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],u=Object(i.useState)(""),s=Object(a.a)(u,2),l=s[0],d=s[1],h=Object(i.useState)(""),g=Object(a.a)(h,2),w=g[0],S=g[1],k=Object(i.useState)(""),y=Object(a.a)(k,2),C=y[0],D=y[1],T=Object(i.useState)(null),N=Object(a.a)(T,2),A=N[0],B=N[1];Object(i.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var E=""===C?n:n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(x,{message:A}),Object(c.jsx)(p,{filter:C,setFilter:D}),Object(c.jsx)("h3",{children:"Add a new"}),Object(c.jsx)(v,{handleSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===l}));console.log(t),t.length>0&&window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))&&m(t[0].id,Object(o.a)(Object(o.a)({},t[0]),{},{number:w})).then((function(e){r(n.map((function(n){return n.id===t[0].id?e:n}))),B("Updated contact '".concat(l,"'")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B(e.response.data.error),setTimeout((function(){B(null)}),5e3)})),""!==l&&0===t.length&&j({name:l,number:w}).then((function(e){r(n.concat(e)),B("Added contact '".concat(l,"'")),setTimeout((function(){B(null)}),5e3),d(""),S("")})).catch((function(e){B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}))},name:l,number:w,setName:d,setNumber:S}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(O,{persons:E,handleDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&f(e).then((function(c){r(n.filter((function(t){return t.id!==e}))),B("Removed contact '".concat(t.name,"'")),setTimeout((function(){B(null)}),5e3)})).catch((function(c){r(n.filter((function(t){return t.id!==e}))),B("Contact '".concat(t.name,"' was already removed from server")),setTimeout((function(){B(null)}),5e3)}))}})]})};u.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.caa9f782.chunk.js.map